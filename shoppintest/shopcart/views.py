from django.shortcuts import render,redirectfrom django.urls import reversefrom django.http import HttpResponsefrom . import modelsimport goods# Create your views here.def shopcart_add(request,goods_id,count):    '''    添加商品goods，购买count个数量到购物车    :param request:    :param goods_id:    :param count:    :return:    '''    # 得到用户购买的商品     _goods = goods.models.Goods.objects.get(pk=goods_id)    try:        # 查询用户的购物车 是否包含该商品        shopcart = models.Shopcart.objects.get(user_id= request.user.id,goods=_goods)        shopcart.count += int(count)        shopcart.subtotal = shopcart.count * _goods.price        shopcart.save()    except Exception as e:        # 如果不包含该商品 创建购物车，添加商品到购物车        print('------------',e)        shopcart = models.Shopcart(user_id= request.user.id,goods=_goods,count=count)        shopcart.subtotal = float(count) * _goods.price        shopcart.save()    # 添加到购物车，跳转到购物车详情页面    # return redirect(reverse('shopcart:shopcart_info'))    return HttpResponse('商品添加成功！！！！')def shopcart_info(request):    '''    查看购物车详情    :param request:    :return:    '''    shopcart_list = models.Shopcart.objects.filter(user_id=request.user.id).order_by('-add_time')    return render(request,'shopcart/shopcart_info.html',{'shopcart_list':shopcart_list})